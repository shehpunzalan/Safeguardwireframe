# SafeGuard Emergency Response - PWA Documentation

## Progressive Web App (PWA) Features

SafeGuard is now a full-featured Progressive Web App with the following capabilities:

### ğŸš€ Key PWA Features

#### 1. **Installable**
- Users can install SafeGuard on their device's home screen
- Works like a native app on iOS, Android, and desktop
- Automatic install prompt after 3 seconds (respects user dismissal for 7 days)
- Manual install via browser menu

#### 2. **Offline Support**
- Full functionality works offline using Workbox service worker
- LocalStorage persistence for user data and emergency contacts
- Cached assets for instant loading
- Critical emergency features available without internet

#### 3. **Auto-Updates**
- Service worker automatically updates in the background
- Users prompted to reload when new version is available
- Seamless update experience

#### 4. **Fast & Reliable**
- Pre-caches all essential assets
- Runtime caching for fonts and external resources
- Instant load times after first visit

#### 5. **App-Like Experience**
- Standalone display mode (no browser UI)
- Custom splash screen with app icon
- Theme color matches app branding (#2563eb)
- Portrait orientation optimized for mobile use

#### 6. **iOS Optimization**
- Apple Touch Icon for home screen
- Status bar styling
- Viewport fit for safe areas
- Full-screen app experience

### ğŸ“± Installation Instructions

#### **Desktop (Chrome, Edge, Brave)**
1. Visit the SafeGuard app
2. Look for install icon in address bar or wait for prompt
3. Click "Install" button
4. App appears as desktop application

#### **Android**
1. Open SafeGuard in Chrome or Edge
2. Tap the menu (three dots) â†’ "Install app" or "Add to Home screen"
3. Confirm installation
4. Access from home screen or app drawer

#### **iOS (Safari)**
1. Open SafeGuard in Safari
2. Tap Share button (square with arrow)
3. Scroll and tap "Add to Home Screen"
4. Name the app and tap "Add"
5. Access from home screen

### ğŸ”§ Development

#### **Testing PWA Locally**
```bash
npm run build
npx vite preview
```

#### **PWA Configuration**
Configuration is in `vite.config.ts`:
- Manifest settings
- Workbox service worker options
- Caching strategies
- Icon assets

#### **Service Worker**
- Auto-generated by vite-plugin-pwa
- Precaches all static assets
- Runtime caching for Google Fonts
- Offline fallback support

### ğŸ¨ Icons & Assets

#### **Icon Locations**
- `/public/pwa-192x192.svg` - Small icon (Android)
- `/public/pwa-512x512.svg` - Large icon (Android)
- `/public/apple-touch-icon.svg` - iOS home screen icon

#### **Manifest**
- Auto-generated as `manifest.webmanifest`
- Includes app metadata, icons, theme colors
- Configures display mode and orientation

### ğŸ“Š Caching Strategy

#### **Precached Assets**
- All JS, CSS, HTML files
- Icons and SVG assets
- Font files (woff, woff2)

#### **Runtime Caching**
- **Google Fonts CSS**: CacheFirst (1 year)
- **Google Fonts Files**: CacheFirst (1 year)
- **User Data**: LocalStorage (persistent)

### ğŸ”’ Security & Privacy

- **No server required** - All data stored locally in browser
- **LocalStorage** for user accounts and settings
- **Offline-first** approach for emergency features
- **HTTPS required** for service worker registration

### ğŸ†• Update Notifications

The app shows a confirmation dialog when updates are available:
- "New content available. Reload?"
- User can choose to update immediately or continue current session
- Updates applied on next reload

### ğŸ“´ Offline Mode

When offline, users see a notification:
- "Offline mode - Emergency features still available"
- Shows network status indicator
- All core features remain functional
- Emergency button works without internet

### ğŸ¯ App Shortcuts

**Emergency Alert Shortcut** (Android)
- Long-press app icon
- Quick access to emergency alert
- Bypasses dashboard for urgent situations

### ğŸ” Debugging

#### **Chrome DevTools**
1. Open DevTools â†’ Application tab
2. Service Workers panel shows registration status
3. Manifest panel validates manifest.json
4. Clear storage to reset PWA state

#### **iOS Debugging**
1. Safari â†’ Develop â†’ iPhone Simulator
2. Check Web Inspector for console logs
3. Verify manifest and icons in Network tab

### âœ… PWA Checklist

- âœ… HTTPS deployment (required for production)
- âœ… Web App Manifest
- âœ… Service Worker registered
- âœ… Icons (192x192, 512x512)
- âœ… Offline support
- âœ… Install prompt
- âœ… Fast load times
- âœ… Responsive design
- âœ… iOS meta tags
- âœ… Theme color
- âœ… Auto-updates

### ğŸš¨ Emergency Features Offline

Even without internet, users can:
- âœ… Access all screens and navigation
- âœ… View stored emergency contacts
- âœ… Read medical information
- âœ… Use voice guidance (text-to-speech)
- âœ… Access accessibility features
- âš ï¸ Cannot send real emergency alerts (requires network)
- âš ï¸ Cannot update GPS location (requires network)

### ğŸ“ Notes

1. **First Load**: Requires internet to download and cache assets
2. **Updates**: Check for updates on each app open when online
3. **Storage**: Uses ~2-5MB for cached assets
4. **Compatibility**: Works on Chrome 90+, Safari 15+, Edge 90+

### ğŸ¨ Customization

To customize the PWA:

1. **Change Colors**: Update `theme_color` in `vite.config.ts`
2. **Update Icons**: Replace SVG files in `/public/` folder
3. **Modify Name**: Edit `name` and `short_name` in manifest
4. **Add Shortcuts**: Add to `shortcuts` array in manifest

### ğŸŒŸ Best Practices

- Keep the app under 5MB for fast installation
- Test on real devices, not just emulators
- Verify offline functionality thoroughly
- Monitor service worker update cycles
- Provide clear feedback for offline state

---

## Technical Stack

- **vite-plugin-pwa**: PWA plugin for Vite
- **Workbox**: Service worker library by Google
- **React**: UI framework
- **Framer Motion**: Install prompt animations
- **LocalStorage**: Client-side data persistence

## Support

For PWA-related issues:
1. Check browser console for service worker errors
2. Verify HTTPS connection
3. Clear cache and re-register service worker
4. Test in incognito/private mode
